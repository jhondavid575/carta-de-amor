<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carta Especial</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Playfair+Display:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Notificaci√≥n inicial -->
    <div id="notification" class="notification">
        <div class="notification-content">
            <div class="notification-icon">‚úâÔ∏è</div>
            <div class="notification-text">
                <p class="notification-title">Tienes un nuevo mensaje</p>
                <p class="notification-subtitle">Revisa tu carta especial</p>
            </div>
            <div class="notification-close">&times;</div>
        </div>
    </div>

    <!-- Carta animada -->
    <div class="letter-container">
        <div class="letter-image" id="letterContainer">
            <div class="animated-mail">
                <div class="back-fold"></div>
                <div class="letter">
                    <div class="letter-border"></div>
                    <div class="letter-title"></div>
                    <div class="letter-context"></div>
                    <div class="letter-stamp">
                        <div class="letter-stamp-inner"></div>
                    </div>
                </div>
                <div class="top-fold"></div>
                <div class="body"></div>
                <div class="left-fold"></div>
            </div>
            <div class="shadow"></div>
        </div>
        <div class="instruction-text">
        </div>
    </div>

    <!-- Modal de la carta abierta -->
    <div id="letterModal" class="modal">
        <div class="modal-overlay" id="modalOverlay"></div>
        <div class="modal-content">
            <span class="close-modal" id="closeModal">&times;</span>
            <div class="letter-paper" id="letterPaper">
                <div class="letter-header">
                    <h1 id="letterTitle">Mi Princesa</h1>
                    <div class="letter-date" id="letterDate">30 de noviembre, 2025</div>
                </div>
                <div class="letter-body" id="letterBody">
                    <p class="greeting" id="greeting"></p>
                    <p id="paragraph1"></p>
                    <p id="paragraph2"></p>
                    <p id="paragraph3"></p>
                    <p id="paragraph4"></p>
                    <p class="signature" id="signature1"></p>
                    <p class="signature-name" id="signature2"></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Mensaje de amor final -->
    <div id="loveMessage" class="love-message">
        <p id="loveText"></p>
    </div>

    <script>
        // Textos para el efecto typing
        const letterTexts = {
            greeting: "Querida Sarayüíñ",
            paragraph1: "No sabes lo afortunado que me siento de tenerte en mi vida. Eres esa persona que me hace sonre√≠r con solo un mensaje,.",
            paragraph2: "la que me llena el alma con su forma de ser, con su risa, con cada mirada.",
            paragraph3: "Te amo con un amor que no se mide ni se compara, porque simplemente nace de lo m√°s profundo de m√≠.",
            paragraph4: "Eres mi todo, mi paz, mi locura bonita‚Ä¶ y no hay un solo d√≠a en el que no agradezca por ti, Prometo seguir aqu√≠, am√°ndote con fuerza, con ganas, y con el coraz√≥n lleno solo de ti..",
            signature1: "Con cari√±o y admiraci√≥n,",
            signature2: "Jhonü•∞"
        };

        const loveMessageText = "Te amo mucho mi cosita hermosa ‚ù§";

        // Funci√≥n para efecto typing
        function typeText(element, text, speed = 30) {
            return new Promise((resolve) => {
                element.textContent = '';
                let i = 0;
                const timer = setInterval(() => {
                    if (i < text.length) {
                        element.textContent += text.charAt(i);
                        i++;
                    } else {
                        clearInterval(timer);
                        resolve();
                    }
                }, speed);
            });
        }

        // Funci√≥n para mostrar la carta con typing
        async function showLetterWithTyping() {
            const modal = document.getElementById('letterModal');
            const letterPaper = document.getElementById('letterPaper');
            
            // Mostrar modal con animaci√≥n
            modal.style.display = 'block';
            modal.classList.add('modal-show');
            
            // Animaci√≥n de entrada del papel
            setTimeout(() => {
                letterPaper.classList.add('letter-entrance');
            }, 100);

            // Esperar a que termine la animaci√≥n de entrada
            setTimeout(async () => {
                // Typing secuencial de cada p√°rrafo
                await typeText(document.getElementById('greeting'), letterTexts.greeting, 40);
                await new Promise(resolve => setTimeout(resolve, 500));
                
                await typeText(document.getElementById('paragraph1'), letterTexts.paragraph1, 25);
                await new Promise(resolve => setTimeout(resolve, 300));
                
                await typeText(document.getElementById('paragraph2'), letterTexts.paragraph2, 25);
                await new Promise(resolve => setTimeout(resolve, 300));
                
                await typeText(document.getElementById('paragraph3'), letterTexts.paragraph3, 25);
                await new Promise(resolve => setTimeout(resolve, 300));
                
                await typeText(document.getElementById('paragraph4'), letterTexts.paragraph4, 25);
                await new Promise(resolve => setTimeout(resolve, 500));
                
                await typeText(document.getElementById('signature1'), letterTexts.signature1, 35);
                await new Promise(resolve => setTimeout(resolve, 200));
                
                await typeText(document.getElementById('signature2'), letterTexts.signature2, 35);
            }, 800);
        }

        // Funci√≥n para cerrar la carta
        function closeLetter() {
            const modal = document.getElementById('letterModal');
            const letterPaper = document.getElementById('letterPaper');
            const loveMessage = document.getElementById('loveMessage');
            
            // Animaci√≥n de salida
            letterPaper.classList.add('letter-exit');
            
            setTimeout(() => {
                modal.classList.remove('modal-show');
                setTimeout(() => {
                    modal.style.display = 'none';
                    letterPaper.classList.remove('letter-entrance', 'letter-exit');
                    
                    // Limpiar textos
                    Object.keys(letterTexts).forEach(key => {
                        const element = document.getElementById(key);
                        if (element) element.textContent = '';
                    });
                    
                    // Mostrar mensaje de amor
                    loveMessage.classList.add('show');
                    typeText(document.getElementById('loveText'), loveMessageText, 100);
                    
                    // Ocultar mensaje despu√©s de 4 segundos
                    setTimeout(() => {
                        loveMessage.classList.remove('show');
                    }, 4000);
                }, 300);
            }, 500);
        }

        // Mostrar notificaci√≥n al cargar la p√°gina
        window.addEventListener('load', function() {
            setTimeout(function() {
                document.getElementById('notification').classList.add('show');
                
                // Auto-ocultar notificaci√≥n despu√©s de 5 segundos
                setTimeout(() => {
                    document.getElementById('notification').classList.remove('show');
                }, 5000);
            }, 1000);
        });

        // La notificaci√≥n ahora solo se cierra, no abre la carta
        document.querySelector('.notification-close').addEventListener('click', function(e) {
            e.stopPropagation();
            document.getElementById('notification').classList.remove('show');
        });

        // Solo la carta abre el modal
        document.getElementById('letterContainer').addEventListener('click', function() {
            document.getElementById('notification').classList.remove('show');
            showLetterWithTyping();
        });

        // Cerrar modal
        document.getElementById('closeModal').addEventListener('click', function() {
            closeLetter();
        });

        // Cerrar modal haciendo clic en el overlay
        document.getElementById('modalOverlay').addEventListener('click', function() {
            closeLetter();
        });
    </script>
</body>
</html>